!function(e){function r(e,r,t,n){function o(){for(var e,r,t=o[a],n=t.length,i=o[l],f=i.length,p=o[_];n--;)if(r=t[n].apply(this,arguments),s(r)&&r.$skip===!0)return r.$data;for(e=p.apply(this,arguments);f--;)if(r=i[f].apply(this,arguments),s(r)&&r.$skip===!0)return e;return e}return e[u]===e?(e[a].push(r),e[l].push(t),e[c].push(n),e):(p(o,e,0,!0),i(e)&&(o.prototype=e.prototype),o[a]=[r],o[l]=[t],o[_]=e,o[c]=[n],o[u]=o,o.$super=e.$super,o.$superp=e.$superp,o)}function t(e,r){var n,o,i;if(e&&e===e[u])if(r){for(o=i=e[c].length;o--&&e[c][o]!==r;);if(o>=0){if(1===i)return t(e);e[c].splice(o,1),e[a].splice(o,1),e[l].splice(o,1)}}else n=e[_],delete e[_],delete e[c],delete e[a],delete e[l],delete e[u];return n}function n(e,r,n,o,i,f){function p(r,n){var i,p,u,a;for(i in r)p=i/1==i?r[i]:i,u="constructor"===p,a=o&&e[p],"constructor"===p&&o?s=t(o,n):(e[p]&&(e[p]=t(e[p],n)),f[p]&&(f[p]=t(f[p],n)))}var s,a,l;if("remove"===r)if(n)p(n,n);else{s=o&&e===e[u]&&e[_];for(var c in f)f[c]=t(f[c])||f[c];for(var c in e)e[c]=t(e[c])||e[c]}else{if(null===(a=/^remove /.exec(r)))throw"Invalid params";l=r.replace(a,"").split(" "),p(l)}return s||e}var o=e.jsface||require("./jsface"),i=(o.Class,o.classOrNil),f=o.functionOrNil,p=o.extend,s=o.mapOrNil,u="___wrapper___",a="___before_fns___",l="___after_fns___",_="___origin_fn___",c="___advisors___",d=function(){};o.pointcut=function(e,t){var o,p,u,a=i(e)||f(e),l=s(e),_=null!==/^remove ?/.exec(t),c=_&&arguments[2];if(!a&&!l||!s(t)&&!_)throw"Invalid params";if(o=a?e.prototype:e,_)return n(e,t,c,a,l,o);for(p in t){u=t[p],u=f(u)?{before:u}:u;var v=s(u)&&!u.before?d:u.before,h=s(u)&&!u.after?d:u.after,m=!1;if(!f(v))throw"Invalid "+p+":before";if(!f(h))throw"Invalid "+p+":after";if(l){if(!f(o[p]))throw"Non-function property named "+p+" on instance";o[p]=r(o[p],v,h,t)}else if("constructor"===p)e=r(e,v,h,t);else if(f(e[p])&&(e[p]=r(e[p],v,h,t),m=!0),f(o[p])&&(o[p]=r(o[p],v,h,t),m=!0),!m)throw"Non-function property named "+p+" on class"}return e},"undefined"!=typeof module&&module.exports&&(module.exports=o.pointcut)}(this);