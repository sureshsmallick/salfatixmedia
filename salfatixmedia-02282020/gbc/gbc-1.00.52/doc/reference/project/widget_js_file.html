<!DOCTYPE html>
<html lang="en">
<head>
  <base href="./../..">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Genero Browser Client Reference Documentation - Widget JavaScript file</title>
  <link rel="shortcut icon" href="favicon.ico">
  <link type="text/css" rel="stylesheet" href="styles/doc.css">
  <link type="text/css" rel="stylesheet" href="styles/materialdesignicons.min.css">
</head>
<body>
  <div class="navbar navbar-default navbar-fixed-top navbar-inverse">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="index.html"> GBC
        </a>
        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse" id="topNavigation">
        <ul class="nav navbar-nav">
            <li>
              <a href="fundamentals/index.html">Basics</a>
            </li>
            <li>
              <a href="GettingStarted.html">Getting started</a>
            </li>
            <li>
              <a href="migration/index.html">What&#x27;s New</a>
            </li>
            <li>
              <a href="reference/index.html">Reference</a>
            </li>
            <li>
              <a href="howdoi/index.html">How do I …</a>
            </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
        </ul>
      </div>
    </div>
  </div>  <div class="container maincontainer">
    <div class="row">
<div class="col-md-2">
  <div class="sidebar btn-group-vertical" role="group">
        
        <a class="btn btn-sidebar " href="reference/index.html">Reference</a>
        <div class="btn-group-vertical" role="group">
          
          <a class="btn btn-sidebar " href="reference/api.html">API reference</a>
          
          <a class="btn btn-sidebar " href="reference/theme/index.html">Theme reference</a>
          <div class="btn-group-vertical" role="group">
            
            <a class="btn btn-sidebar " href="reference/theme/theme_conditions.html">Theme conditions</a>
            
            <a class="btn btn-sidebar " href="reference/theme/theme_config_json.html">theme.config.json file</a>
            
            <a class="btn btn-sidebar " href="reference/theme/theme_scss_json_file.html">theme.scss.json file</a>
            
            <a class="btn btn-sidebar " href="reference/theme/theme_variables.html">Theme variables reference</a>
          </div>
          
          <a class="btn btn-sidebar " href="reference/grunt/index.html">Grunt reference</a>
          <div class="btn-group-vertical" role="group">
            
            <a class="btn btn-sidebar " href="reference/grunt/configure_compilation.html">Configure your compilation</a>
            
            <a class="btn btn-sidebar " href="reference/grunt/fix_configuration_issues.html">Fix configuration issues</a>
          </div>
          
          <a class="btn btn-sidebar " href="reference/project/index.html">Project reference</a>
          <div class="btn-group-vertical" role="group">
            
            <a class="btn btn-sidebar " href="reference/project/project_directory.html">Project directory</a>
            
            <a class="btn btn-sidebar " href="reference/project/customization_project.html">Customization project</a>
            
            <a class="btn btn-sidebar " href="reference/project/widgets.html">Widgets</a>
            
            <a class="btn btn-sidebar active" href="reference/project/widget_js_file.html">Widget JavaScript file</a>
            
            <a class="btn btn-sidebar " href="reference/project/widget_template_file.html">Widget template file</a>
            
            <a class="btn btn-sidebar " href="reference/project/widget_scss_file.html">Widget scss file</a>
            
            <a class="btn btn-sidebar " href="reference/project/widgets_with_modelhelper.html">Widgets with Modelhelper</a>
            
            <a class="btn btn-sidebar " href="reference/project/deliverables.html">Deliverables</a>
          </div>
          
          <a class="btn btn-sidebar " href="reference/upgrading/index.html">Upgrading</a>
          <div class="btn-group-vertical" role="group">
            
            <a class="btn btn-sidebar " href="reference/upgrading/bootstrap.html">Application bootstrap</a>
            
            <a class="btn btn-sidebar " href="reference/upgrading/compatibility.html">Compatibility</a>
            
            <a class="btn btn-sidebar " href="reference/upgrading/cookies.html">Use of cookies</a>
            
            <a class="btn btn-sidebar " href="reference/upgrading/customization_migration.html">Customization migration</a>
            
            <a class="btn btn-sidebar " href="reference/upgrading/deploy-runtime-on-gas..html">Deploy runtime on GAS</a>
            
            <a class="btn btn-sidebar " href="reference/upgrading/deployment-portal.html">Deploy runtime with Portal</a>
            
            <a class="btn btn-sidebar " href="reference/upgrading/local_storage.html">Local storage</a>
            
            <a class="btn btn-sidebar " href="reference/upgrading/Upgrade-GBC-for-GE_3.10.html">Upgrade to 3.10</a>
          </div>
        </div>
  </div>
</div>
<div class="col-md-10">
        <div id="main" class="reference">
<header class="page-title">
  <em>Widget JavaScript file</em>
</header>
<article class="md-content">
<p>The js file contains specific JavaScript code that implements a widget as an element of the user interface. In this page examples are shown of how to extend existing widgets and implement the changes by registering them as new widget classes.</p>
<h2>Overview</h2>
<p>The js files contain functions for rendering the widget template file (<code>.tpl.html</code>) and dynamically building the DOM element. If you wish to customize a widget, you need to extend the standard widget class in a new widget js file contained in your customization project directory.</p>
<p>The js is associated with a template file, which needs to use the same name.</p>
<blockquote>
<p><em>NOTE</em>: If the template file does not have the same name as the js, it can be referenced explicitly in the code using the <code>__templateName</code> value.</p>
</blockquote>
<h2>Extending a basic widget</h2>
<p>This sample code shows the minimal code you need to extend a basic widget in <code>js</code>.</p>
<pre class="hljs"><code><span class="hljs-meta">"use strict"</span>;

modulum(<span class="hljs-string">'newWidget'</span>, [<span class="hljs-string">'baseWidget'</span>, <span class="hljs-string">'WidgetFactory'</span>],
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context, cls</span>) </span>{

    cls.newWidget = context.oo.Class(cls.baseWidget, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">__name</span>: <span class="hljs-string">"newWidget"</span>,

        <span class="hljs-comment">/* your custom code */</span>
      };
    });
    cls.WidgetFactory.register(<span class="hljs-string">'widgetType'</span>, cls.newWidget);
  });

</code></pre>
<p>where:</p>
<ul>
<li><code>newWidget</code> is your custom widget</li>
<li><code>baseWidget</code> is the built-in widget that it extends</li>
<li><code>widgetType</code> is the widget representation (node name) in the AUI tree.</li>
</ul>
<h2>Extending a basic widget and registering a new widget style</h2>
<p>Register a new widget style to allow for selective application of your customization as specified by the style settings in your form source.</p>
<pre class="hljs"><code><span class="hljs-meta">"use strict"</span>;

modulum(<span class="hljs-string">'newWidget'</span>, [<span class="hljs-string">'baseWidget'</span>, <span class="hljs-string">'WidgetFactory'</span>],
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context, cls</span>) </span>{

    cls.newWidget = context.oo.Class(cls.baseWidget, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">__name</span>: <span class="hljs-string">"newWidget"</span>,

        <span class="hljs-comment">/* your custom code */</span>
      };
    });
    cls.WidgetFactory.register(<span class="hljs-string">'widgetType'</span>, ‘widgetStyle’, cls.newWidget);
  });

</code></pre>
<p>where:</p>
<ul>
<li><code>newWidget</code> is your custom widget</li>
<li><code>baseWidget</code> is the built-in widget that it extends</li>
<li><code>widgetType</code> is the widget representation (node name) in the AUI tree.</li>
<li><code>widgetStyle</code> is the style name.</li>
</ul>
<p>The <code>widgetStyle</code> argument (optional) allows you to reference your widget in your Genero form source. For example, in this form (<code>.per</code>) file snippet, the style &quot;widgetStyle&quot; is applied to the defined Edit form field:</p>
<pre><code>EDIT f01 = formonly.edit, STYLE=”widgetStyle”;

</code></pre>
<p>Only fields with the style applied will be customized.</p>
<h2>Example: Extending a simple widget</h2>
<p>For simple widget customization, you can extend the Edit widget as an example, in a file <code>&lt;GBC_PROJECT_DIR&gt;/customization/&lt;customization_project_dir&gt;/js/MyEditWidget.js</code>, like:</p>
<pre class="hljs"><code><span class="hljs-meta">
"use strict"</span>;

modulum(<span class="hljs-string">'MyEditWidget'</span>, [<span class="hljs-string">'EditWidget'</span>, <span class="hljs-string">'WidgetFactory'</span>],
 
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context, cls</span>) </span>{

    <span class="hljs-comment">/**
     * Edit widget.
     * @class classes.MyEditWidget
     * @extends classes.EditWidget
     */</span>
    cls.MyEditWidget = context.oo.Class(cls.EditWidget, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
      <span class="hljs-comment">/** @lends classes.MyEditWidget.prototype */</span>
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">__name</span>: <span class="hljs-string">"MyEditWidget"</span>.
        
        setTitle: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">title</span>) </span>{
          $(<span class="hljs-keyword">this</span>.getElement()).find(<span class="hljs-string">".title"</span>).text(title);
        },

        <span class="hljs-attr">getTitle</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
          <span class="hljs-keyword">return</span> $(<span class="hljs-keyword">this</span>.getElement()).find(<span class="hljs-string">".title"</span>).text();
        }
      };
    });
    cls.WidgetFactory.registerBuilder(<span class="hljs-string">'Edit'</span>, cls.MyEditWidget);
  });
</code></pre>
<p>And a template file <code>&lt;GBC_PROJECT_DIR&gt;/customization/&lt;customization_project_dir&gt;/js/MyEditWidget.tpl.html</code>, like:</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"gbc_dataContentPlaceholder"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>This customization extends the built-in EditWidget. You can reference an element in the HTML template for the widget by using the <code>this.getElement()</code> function.</p>
<h2>Example: Extending a container widget</h2>
<p>For container widget customization, you can set for example a file <code>&lt;GBC_PROJECT_DIR&gt;/customization/&lt;customization_project_dir&gt;/js/MyComposedWidget.js</code>.</p>
<pre class="hljs"><code><span class="hljs-meta">"use strict"</span>;

modulum(<span class="hljs-string">'MyComposedWidget'</span>, [<span class="hljs-string">'WidgetGroupBase'</span>, <span class="hljs-string">'WidgetFactory'</span>],
  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">context, cls</span>) </span>{
    cls.MyComposedWidget = context.oo.Class(cls.WidgetGroupBase, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$super</span>) </span>{
      <span class="hljs-comment">/** @lends classes.MyComposedWidget.prototype */</span>
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">__name</span>: <span class="hljs-string">"MyComposedWidget"</span>,

        <span class="hljs-attr">_label</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">_edit</span>: <span class="hljs-literal">null</span>,

        <span class="hljs-attr">constructor</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
          $<span class="hljs-keyword">super</span>.constructor.call(<span class="hljs-keyword">this</span>);
          <span class="hljs-keyword">this</span>._label = cls.WidgetFactory.createWidget(<span class="hljs-string">'Label'</span>);
          <span class="hljs-keyword">this</span>._edit = cls.WidgetFactory.createWidget(<span class="hljs-string">'Edit'</span>);
          <span class="hljs-keyword">this</span>.addChildWidget(<span class="hljs-keyword">this</span>._label);
          <span class="hljs-keyword">this</span>.addChildWidget(<span class="hljs-keyword">this</span>._edit);
        },

        [...]
        destroy: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
          <span class="hljs-keyword">this</span>.removeChildWidget(<span class="hljs-keyword">this</span>._label);
          <span class="hljs-keyword">this</span>.removeChildWidget(<span class="hljs-keyword">this</span>._edit);
          <span class="hljs-keyword">this</span>._label.destroy();
          <span class="hljs-keyword">this</span>._label = <span class="hljs-literal">null</span>;
          <span class="hljs-keyword">this</span>._edit.destroy();
          <span class="hljs-keyword">this</span>._edit = <span class="hljs-literal">null</span>;
          $<span class="hljs-keyword">super</span>.destroy();
        },
        [...]
      };
    });
    cls.WidgetFactory.registerBuilder(<span class="hljs-string">'MyComposed'</span>, cls.MyComposedWidget);
  });

</code></pre>
<p>For a Container widget, the root base widget is always <code>WidgetGroupBase</code>. You add the child elements with <code>this.addChildWidget</code> and remove child elements with <code>this.removeChildWidget</code>.</p>

</article>
        </div>
      </div>
    </div>
  </div>
  <footer>
    <span class="copyright">Property of Four Js* (c) Copyright Four Js 2014, 2019. All Rights Reserved.</span>
    <span class="version">Version <em>1.00.52</em> (build 201903131722)</span>
    <span class="jsdoc-message">Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc <?js= env.version.number ?></a>
      
    </span>
  </footer>
  <script src="scripts/gbcdoc.js"></script>
</body>
</html>
